---
description: 
globs: 
alwaysApply: true
---

# Your rule content

- You can @ files here
- You can use markdown but dont have to

다음은 최종 MVP 와이어프레임 최종본입니다.
 관리자(Admin)와 일반 유저(User) 모두 동일한 근무내역 데이터를 기반으로, 관리자 화면은 전체 데이터를 관리할 수 있고, 일반 유저 화면은 본인 데이터만 조회할 수 있도록 구성했습니다.

1. 로그인 페이지
┌─────────────────────────────────────┐
│         [장수도시락 급여관리]         │
│─────────────────────────────────────│
│  ID: [              ]               │
│  PW: [              ]               │
│                                     │
│      [ 로그인 버튼 ]                │
└─────────────────────────────────────┘

설명: ID/PW 입력 후 로그인


관리자 계정 → 관리자 메인 페이지로 이동


일반 유저 계정 → 유저 메인 페이지로 이동



2. 관리자(Admin) 화면
2.1 관리자 메인 페이지
┌─────────────────────────────────────┐
│       관리자 메인 (예: 홍길동)         │
│─────────────────────────────────────│
│  [직원 관리]   [근무내역 관리]   [급여확인/다운로드]   [로그아웃]  │
└─────────────────────────────────────┘

설명: 관리자 로그인 후 전체 메뉴를 한눈에 확인.



2.2 직원 관리
┌──────────────────────────────────────────────────┐
│                [직원 관리]                      │
│──────────────────────────────────────────────────│
│   [직원 추가] 버튼                               │
│                                                  │
│   ┌────────────────────────────────────────────┐ │
│   │  이름    |  이메일          | 시급  | 관리   │ │
│   │--------------------------------------------│ │
│   │  홍길동  |  hong@test.com   | 9,000 | 편집/삭제 │ │
│   │  김철수  |  cs@test.com     | 10,000| 편집/삭제 │ │
│   └────────────────────────────────────────────┘ │
└──────────────────────────────────────────────────┘

설명: 직원의 이름, 이메일, 시급 정보를 관리하며, 신규 등록 및 수정/삭제 기능 제공.



2.3 근무내역 관리 (상세화)
┌────────────────────────────────────────────────────────────────────┐
│                      [근무내역 관리]                               │
│────────────────────────────────────────────────────────────────────│
│  [직원 선택: 전체▼]    [기간: 2025-03-01 ~ 2025-03-31]   [조회]        │
│                                                                    │
│  [근무내역 추가] 버튼                                              │
│                                                                    │
│   ┌───────────────────────────────────────────────────────────┐    │
│   │ 날짜   | 직원   | 출근   | 퇴근   | 근무시간 | 시급  | 지급액  | 메모  │    │
│   │-----------------------------------------------------------│    │
│   │ 03/01 | 홍길동 | 09:00 | 18:00 | 8시간   | 9,000 | 72,000 |       │    │
│   │ 03/01 | 김철수 | 10:00 | 17:00 | 6시간   |10,000 | 60,000 | 주방  │    │
│   │ 03/02 | 홍길동 | 09:00 | 18:00 | 8시간   | 9,000 | 72,000 |       │    │
│   │ ...                                                       ...    │    │
│   └───────────────────────────────────────────────────────────┘    │
└────────────────────────────────────────────────────────────────────┘

설명:


필터: 전체 직원 또는 특정 직원을 선택하고, 날짜 범위를 지정해 조회


입력 항목: 날짜, 직원, 출근시간, 퇴근시간, (자동 계산) 근무시간, 시급, 지급액(근무시간×시급), 메모


추가/편집/삭제: 개별 행 수정 가능



3. 일반 유저(User) 화면
3.1 유저 메인 페이지
┌─────────────────────────────────────┐
│         유저 메인 (예: 홍길동)         │
│─────────────────────────────────────│
│  [나의 근무내역]   [급여 명세서]   [로그아웃]  │
└─────────────────────────────────────┘

설명: 로그인한 사용자가 본인의 데이터를 확인할 수 있는 메뉴 제공



3.2 나의 근무내역
(관리자용 근무내역 관리 화면과 동일한 구성 – 단, 현재 로그인한 사용자의 내역만 노출)
┌────────────────────────────────────────────────────────────────────┐
│                    [나의 근무내역] (홍길동)                          │
│────────────────────────────────────────────────────────────────────│
│  [기간: 2025-03-01 ~ 2025-03-31]   [조회]                            │
│                                                                    │
│   ┌───────────────────────────────────────────────────────────┐    │
│   │ 날짜   | 출근   | 퇴근   | 근무시간 | 시급  | 지급액  | 메모  │    │
│   │-----------------------------------------------------------│    │
│   │ 03/01 | 09:00  | 18:00  | 8시간   | 9,000 | 72,000 |       │    │
│   │ 03/02 | 09:00  | 18:00  | 8시간   | 9,000 | 72,000 |       │    │
│   │ ...                                                       ...    │    │
│   └───────────────────────────────────────────────────────────┘    │
└────────────────────────────────────────────────────────────────────┘

설명: 본인의 근무내역만 표시하며, 날짜 필터로 특정 기간 조회 가능



3.3 급여 명세서 (상세화)
┌────────────────────────────────────────────────────────────────────┐
│                         [나의 급여 명세서] (홍길동)                    │
│────────────────────────────────────────────────────────────────────│
│  (월 선택: 2025-03)   [조회]                                       │
│                                                                    │
│   ┌───────────────────────────────────────────────────────────┐    │
│   │ 날짜   | 출근   | 퇴근   | 근무시간 | 시급  | 일일지급액 | 메모  │    │
│   │-----------------------------------------------------------│    │
│   │ 03/01 | 09:00  | 18:00  | 8시간   | 9,000 | 72,000    |       │    │
│   │ 03/02 | 09:00  | 18:00  | 8시간   | 9,000 | 72,000    |       │    │
│   │ 03/03 | 09:00  | 18:00  | 8시간   | 9,000 | 72,000    |       │    │
│   │ ...                                                       ...    │    │
│   └───────────────────────────────────────────────────────────┘    │
│                                                                    │
│  총 근무일수: 20일                                                 │
│  총 근무시간: 160시간                                               │
│  시급: 9,000원                                                     │
│  예상 급여: 1,440,000원                                              │
│                                                                    │
│                [PDF 다운로드 버튼]                                │
└────────────────────────────────────────────────────────────────────┘

설명:


선택한 월에 대해 일별 근무내역(출근, 퇴근, 근무시간, 시급, 일일 지급액, 메모) 상세히 표시


하단 합계 영역에 총 근무일수, 총 근무시간, 시급, 예상 급여 계산


PDF 다운로드 버튼을 통해 명세서를 저장 가능



전체 요약
로그인 페이지: ID/PW 입력 → 관리자와 유저 화면 분기


관리자(Admin)


직원 관리: 직원 목록(이름, 이메일, 시급) 등록/수정/삭제


근무내역 관리: 날짜·직원 필터로 전체 근무내역 관리 (출근, 퇴근, 근무시간, 시급, 지급액, 메모)


급여확인/다운로드: 전체 직원의 급여 산출 및 PDF 명세서 다운로드


일반 유저(User)


나의 근무내역: 관리자 화면과 동일한 레이아웃으로, 본인의 데이터만 조회


급여 명세서: 선택 월의 일별 상세 근무내역과 합계, PDF 저장 기능


이 최종본 와이어프레임을 기준으로 빠른 MVP 개발이 가능하며, 필요 시 추가 확장(알림, 세금/공제, 자동 계산 등)을 고려할 수 있습니다.

-- 확장 모듈 활성화: gen_random_uuid() 사용을 위해 pgcrypto 확장을 설치합니다.
CREATE EXTENSION IF NOT EXISTS pgcrypto;

-- 1. 사용자 테이블: 관리자와 일반 유저(직원)의 계정 정보를 저장합니다.
CREATE TABLE users (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    name VARCHAR(100) NOT NULL,
    email VARCHAR(150) NOT NULL UNIQUE,
    password_hash VARCHAR(200) NOT NULL,
    role VARCHAR(20) NOT NULL CHECK (role IN ('admin', 'user')),
    hourly_rate NUMERIC(10,2) NOT NULL, -- 기본 시급 (관리자에 의해 설정/수정 가능)
    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
);

-- 2. 근무내역 테이블: 각 직원의 일자별 근무내역을 저장합니다.
CREATE TABLE work_logs (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    work_date DATE NOT NULL,           -- 근무 일자
    start_time TIME NOT NULL,          -- 출근 시간
    end_time TIME NOT NULL,            -- 퇴근 시간
    work_hours NUMERIC(4,2) NOT NULL,    -- 근무시간 (예: 8.00, 애플리케이션에서 계산하여 입력)
    hourly_rate NUMERIC(10,2) NOT NULL,  -- 해당 기록에 적용된 시급 (기본값은 users.hourly_rate)
    payment_amount NUMERIC(10,2) NOT NULL, -- 지급액 (근무시간 * 시급)
    memo TEXT,                         -- 비고 (옵션)
    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
    CHECK (end_time > start_time)      -- 출근 시간보다 퇴근 시간이 늦은지 확인
);

-- 3. 인덱스: 사용자별, 근무일자별 조회 성능 향상을 위해 인덱스를 추가합니다.
CREATE INDEX idx_work_logs_user_date ON work_logs(user_id, work_date);



